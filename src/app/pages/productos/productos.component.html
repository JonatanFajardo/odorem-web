<!-- HERO SECTION -->
<section class="products-hero">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6">
        <div class="hero-content">
          <span class="hero-badge">üõçÔ∏è Nuestra Colecci√≥n</span>
          <h1 class="hero-title">Encuentra Tu <span class="text-gradient">Fragancia Perfecta</span></h1>
          <p class="hero-description">
            Explora m√°s de 500 fragancias de las mejores marcas del mundo. 
            Usa nuestros filtros avanzados para encontrar exactamente lo que buscas.
          </p>
          <div class="hero-stats">
            <div class="row">
              <div class="col-4 text-center">
                <h4 class="stat-number">{{ productosFiltrados.length }}</h4>
                <p class="stat-label">Productos</p>
              </div>
              <div class="col-4 text-center">
                <h4 class="stat-number">{{ marcas.length }}</h4>
                <p class="stat-label">Marcas</p>
              </div>
              <div class="col-4 text-center">
                <h4 class="stat-number">100%</h4>
                <p class="stat-label">Originales</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="hero-image">
          <img src="assets/images/1416.jpg" alt="Perfumes Collection" class="img-fluid rounded-4 shadow-lg">
        </div>
      </div>
    </div>
  </div>
</section>

<!-- PRODUCTS SECTION -->
<section class="products-section py-5 px-4">
  <div class="">
    <div class="row">
      <!-- SIDEBAR FILTERS -->
      <div class="col-lg-3 col-md-4">
        <div class="filters-sidebar">
          <div class="filters-header">
            <h4><i class="fas fa-filter me-2"></i>Filtros</h4>
            <button class="btn btn-sm btn-outline-primary" (click)="limpiarFiltros()">
              <i class="fas fa-refresh me-1"></i>Limpiar
            </button>
          </div>

          <!-- PRICE FILTER -->
          <div class="filter-card">
            <h5 class="filter-title">
              <i class="fas fa-dollar-sign me-2"></i>Rango de Precio
            </h5>
            <div class="price-range">
              <div class="range-slider">
                <input type="range" class="form-range modern-range" id="priceRange" min="0" max="5000" />
              </div>
              <div class="price-inputs">
                <div class="input-group">
                  <span class="input-group-text">L.</span>
                  <input type="number" class="form-control" [(ngModel)]="precioMinimo" placeholder="M√≠n">
                </div>
                <span class="price-separator">-</span>
                <div class="input-group">
                  <span class="input-group-text">L.</span>
                  <input type="number" class="form-control" [(ngModel)]="precioMaximo" placeholder="M√°x">
                </div>
              </div>
              <button class="btn btn-primary btn-sm w-100 mt-3" (click)="filtrarProductos()">
                <i class="fas fa-search me-1"></i>Aplicar Filtro
              </button>
            </div>
          </div>

          <!-- BRANDS FILTER -->
          <div class="filter-card">
            <h5 class="filter-title">
              <i class="fas fa-tags me-2"></i>Marcas
              <span class="filter-count">({{ marcas.length }})</span>
            </h5>
            <div class="brands-filter">
              <div class="search-brands">
                <div class="input-group input-group-sm">
                  <span class="input-group-text">
                    <i class="fas fa-search"></i>
                  </span>
                  <input type="text" class="form-control" placeholder="Buscar marca..." #searchBrand>
                </div>
              </div>
              <div class="brands-list">
                <div class="brand-item" *ngFor="let marca of marcas">
                  <label class="modern-checkbox">
                    <input 
                      type="checkbox" 
                      [(ngModel)]="marca.checked" 
                      (change)="filtrarProductos()"
                    >
                    <span class="checkmark"></span>
                    <span class="brand-name">{{ marca.nombre }}</span>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- QUICK FILTERS -->
          <div class="filter-card">
            <h5 class="filter-title">
              <i class="fas fa-star me-2"></i>Filtros R√°pidos
            </h5>
            <div class="quick-filters">
              <button class="filter-chip">
                <i class="fas fa-fire me-1"></i>M√°s Vendidos
              </button>
              <button class="filter-chip">
                <i class="fas fa-tag me-1"></i>En Oferta
              </button>
              <button class="filter-chip">
                <i class="fas fa-star me-1"></i>Mejor Valorados
              </button>
              <button class="filter-chip">
                <i class="fas fa-plus me-1"></i>Nuevos
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- PRODUCTS GRID -->
      <div class="col-lg-9 col-md-8">
        <!-- PRODUCTS HEADER -->
        <div class="products-header">
          <div class="results-info">
            <h3>Productos Encontrados</h3>
            <p>{{ productosFiltrados.length }} productos disponibles</p>
          </div>
          
          <!-- SEARCH BAR -->
          <div class="search-container">
            <div class="input-group search-input">
              <span class="input-group-text">
                <i class="fas fa-search"></i>
              </span>
              <input 
                type="text" 
                class="form-control" 
                placeholder="Buscar productos por nombre..."
                [(ngModel)]="terminoBusqueda"
                (input)="filtrarProductos()"
              >
              <button 
                class="btn btn-outline-secondary" 
                type="button"
                *ngIf="terminoBusqueda"
                (click)="limpiarBusqueda()"
              >
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
          <div class="products-controls">
            <div class="sort-dropdown">
              <select class="form-select modern-select">
                <option value="0">M√°s Relevantes</option>
                <option value="1">Precio: Menor a Mayor</option>
                <option value="2">Precio: Mayor a Menor</option>
                <option value="3">M√°s Populares</option>
                <option value="4">Mejor Valorados</option>
                <option value="5">M√°s Recientes</option>
              </select>
            </div>
            <div class="view-toggle">
              <button 
                class="btn btn-view" 
                [class.active]="vistaActual === 'list'"
                title="Vista Lista"
                (click)="cambiarVista('list')"
              >
                <i class="fas fa-list"></i>
              </button>
              <button 
                class="btn btn-view" 
                [class.active]="vistaActual === 'grid'"
                title="Vista Cuadr√≠cula"
                (click)="cambiarVista('grid')"
              >
                <i class="fas fa-th-large"></i>
              </button>
            </div>
          </div>
        </div>

        <!-- PRODUCTS GRID -->
        <div class="products-grid" [ngClass]="'view-' + vistaActual">
          <!-- Vista de Cuadr√≠cula -->
          <div class="row g-4" *ngIf="vistaActual === 'grid'">
            <div 
              class="col-lg-4 col-md-6 col-sm-6" 
              *ngFor="let producto of productosFiltrados | paginate: { 
                id: 'some_id', 
                itemsPerPage: 12, 
                currentPage: page 
              }; let i = index"
            >
              <app-product-card-v2 [producto]="producto"></app-product-card-v2>
            </div>
          </div>

          <!-- Vista de Lista -->
          <div class="products-list" *ngIf="vistaActual === 'list'">
            <div 
              class="product-list-item"
              *ngFor="let producto of productosFiltrados | paginate: { 
                id: 'some_id', 
                itemsPerPage: 12, 
                currentPage: page 
              }; let i = index"
            >
              <div class="product-image" (click)="redirectToProductosDetalle(producto.idProducto)">
                <img [src]="producto.linkDocumento" [alt]="producto.nombre" class="img-fluid">
              </div>
              <div class="product-info">
                <div class="product-header">
                  <h5 class="product-title" (click)="redirectToProductosDetalle(producto.idProducto)">{{ producto.nombre }}</h5>
                  <span class="product-brand">{{ producto.marca }}</span>
                </div>
                <p class="product-description">{{ producto.description }}</p>
                <div class="product-details">
                  <span class="product-category">
                    <i class="fas fa-tag me-1"></i>{{ producto.categoria }}
                  </span>
                  <span class="product-size" *ngIf="producto.medida">
                    <i class="fas fa-ruler me-1"></i>{{ producto.medida }}
                  </span>
                </div>
              </div>
              <div class="product-actions">
                <div class="product-price">
                  <span class="price">L. {{ producto.precio | number:'1.2-2' }}</span>
                </div>
                <div class="action-buttons">
                  <button 
                    class="btn btn-outline-primary btn-sm" 
                    title="Ver detalles"
                    (click)="redirectToProductosDetalle(producto.idProducto)"
                  >
                    <i class="fas fa-eye"></i>
                  </button>
                  <button class="btn btn-primary btn-sm" title="Agregar al carrito">
                    <i class="fas fa-shopping-cart"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- NO PRODUCTS FOUND -->
          <div class="no-products" *ngIf="productosFiltrados.length === 0">
            <div class="text-center py-5">
              <i class="fas fa-search fa-3x text-muted mb-3"></i>
              <h4>No se encontraron productos</h4>
              <p class="text-muted">Intenta ajustar tus filtros para ver m√°s resultados</p>
              <button class="btn btn-primary" (click)="limpiarFiltros()">
                <i class="fas fa-refresh me-2"></i>Limpiar Filtros
              </button>
            </div>
          </div>
        </div>

        <!-- PAGINATION -->
        <div class="products-pagination" *ngIf="productosFiltrados.length > 0">
          <nav aria-label="Paginaci√≥n de productos">
            <pagination-controls
              id="some_id"
              (pageChange)="pageChange($event)"
              previousLabel="Anterior"
              nextLabel="Siguiente"
              screenReaderPaginationLabel="Paginaci√≥n"
              screenReaderPageLabel="p√°gina"
              screenReaderCurrentLabel="Est√°s en la p√°gina"
              class="modern-pagination"
            ></pagination-controls>
          </nav>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- FEATURED SECTION -->
<section class="featured-section py-5">
  <div class="container">
    <div class="text-center mb-5">
      <span class="section-badge">Recomendado para ti</span>
      <h2 class="section-title">Tambi√©n te puede interesar</h2>
      <p class="section-description">Productos similares que otros clientes han comprado</p>
    </div>
    <div class="row g-4">
      <div class="col-lg-3 col-md-6" *ngFor="let producto of productosFiltrados.slice(0, 4)">
        <app-product-card-v2 [producto]="producto"></app-product-card-v2>
      </div>
    </div>
  </div>
</section> 